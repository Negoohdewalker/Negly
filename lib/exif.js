/*


GIFTED-MD
VERSION 3.0.0


*/


const _0x513e03=_0x2d09;function _0x2d09(_0x66ac4a,_0x50b545){const _0x17d131=_0x17d1();return _0x2d09=function(_0x2d09af,_0xb8406){_0x2d09af=_0x2d09af-0x1d4;let _0x264a98=_0x17d131[_0x2d09af];return _0x264a98;},_0x2d09(_0x66ac4a,_0x50b545);}(function(_0x5e7a1d,_0x30960b){const _0x15dfd7=_0x2d09,_0x27bad8=_0x5e7a1d();while(!![]){try{const _0x291424=-parseInt(_0x15dfd7(0x201))/0x1*(parseInt(_0x15dfd7(0x1d9))/0x2)+parseInt(_0x15dfd7(0x1ef))/0x3*(parseInt(_0x15dfd7(0x206))/0x4)+parseInt(_0x15dfd7(0x226))/0x5+parseInt(_0x15dfd7(0x20d))/0x6+parseInt(_0x15dfd7(0x21a))/0x7*(parseInt(_0x15dfd7(0x208))/0x8)+-parseInt(_0x15dfd7(0x1eb))/0x9*(-parseInt(_0x15dfd7(0x1fc))/0xa)+-parseInt(_0x15dfd7(0x221))/0xb;if(_0x291424===_0x30960b)break;else _0x27bad8['push'](_0x27bad8['shift']());}catch(_0x2dde81){_0x27bad8['push'](_0x27bad8['shift']());}}}(_0x17d1,0xe9ea7));const ffmpeg=require(_0x513e03(0x1d8)),{randomBytes}=require(_0x513e03(0x1f8)),fs=require('fs'),{getHttpStream,toBuffer}=require(_0x513e03(0x200)),sharp=require('sharp'),{spawn}=require('child_process'),path=require(_0x513e03(0x1de)),{fromBuffer}=require(_0x513e03(0x1e0)),{tmpdir}=require('os'),ff=require(_0x513e03(0x1d8)),webp=require('node-webpmux');async function toGif(_0x29cbe5){const _0x430c62=_0x513e03;try{const _0xbb2dc='./'+randomBytes(0x3)[_0x430c62(0x217)]('hex')+_0x430c62(0x1df),_0x5b4923='./'+randomBytes(0x3)[_0x430c62(0x217)](_0x430c62(0x21d))+_0x430c62(0x1d6);fs[_0x430c62(0x1d7)](_0xbb2dc,_0x29cbe5[_0x430c62(0x217)](_0x430c62(0x1e7)),_0x430c62(0x1e7));const _0x49b896=await new Promise(_0xa549fa=>{const _0x44218f=_0x430c62;spawn('convert',[_0xbb2dc,_0x5b4923])['on'](_0x44218f(0x22a),_0x41b709=>{throw _0x41b709;})['on'](_0x44218f(0x1f4),()=>_0xa549fa(_0x5b4923));});let _0x10c8ad=fs['readFileSync'](_0x49b896);try{fs[_0x430c62(0x1d5)](_0xbb2dc);}catch{}try{fs[_0x430c62(0x1d5)](_0x5b4923);}catch{}return _0x10c8ad;}catch(_0x1d6e37){console[_0x430c62(0x1fa)](_0x1d6e37);}}async function toMp4(_0x2dbc90){const _0x5a1d11=_0x513e03;try{let _0x21bc6b='./'+randomBytes(0x3)[_0x5a1d11(0x217)](_0x5a1d11(0x21d))+_0x5a1d11(0x1d6);const _0x523aab=fs[_0x5a1d11(0x1e6)](_0x2dbc90)?_0x2dbc90:save(_0x2dbc90,_0x21bc6b),_0x2ee6e5='./'+randomBytes(0x3)[_0x5a1d11(0x217)](_0x5a1d11(0x21d))+_0x5a1d11(0x1ed),_0x3d0ef5=await new Promise(_0xa95d51=>{const _0x4003ac=_0x5a1d11;ffmpeg(_0x523aab)[_0x4003ac(0x1db)]([_0x4003ac(0x1dc),_0x4003ac(0x220),_0x4003ac(0x204),_0x4003ac(0x214)])[_0x4003ac(0x1ff)]('mp4')[_0x4003ac(0x21c)]()[_0x4003ac(0x21b)](_0x2ee6e5)['on'](_0x4003ac(0x1f4),()=>_0xa95d51(_0x2ee6e5));});let _0x19902b=await fs['promises'][_0x5a1d11(0x224)](_0x3d0ef5);try{fs[_0x5a1d11(0x1d5)](_0x523aab);}catch{}try{fs[_0x5a1d11(0x1d5)](_0x2ee6e5);}catch{}return _0x19902b;}catch(_0x5bce82){console[_0x5a1d11(0x1fa)](_0x5bce82);}}const EightD=async _0x7446c2=>{const _0x5bc4bb=_0x513e03,_0x2b75bf=_0x5bc4bb(0x1d4)+randomBytes(0x3)[_0x5bc4bb(0x217)](_0x5bc4bb(0x21d))+'.mp3';_0x7446c2=Buffer[_0x5bc4bb(0x21e)](_0x7446c2)?save(_0x7446c2,_0x2b75bf):_0x7446c2;const _0x52c4e5=_0x5bc4bb(0x1d4)+randomBytes(0x3)[_0x5bc4bb(0x217)]('hex')+_0x5bc4bb(0x215),_0x2e7980=await new Promise(_0x128cb6=>{const _0x4ca724=_0x5bc4bb;ffmpeg(_0x7446c2)[_0x4ca724(0x210)]([_0x4ca724(0x1f1)])[_0x4ca724(0x228)](0xac44)[_0x4ca724(0x1f7)](0x2)[_0x4ca724(0x1f2)](_0x4ca724(0x20e))['audioCodec'](_0x4ca724(0x1fe))[_0x4ca724(0x1ee)](0x5)[_0x4ca724(0x1ff)](_0x4ca724(0x218))[_0x4ca724(0x21b)](_0x52c4e5)['on']('end',()=>_0x128cb6(_0x52c4e5));});return _0x2e7980;};function save(_0xcf1753,_0x49379d=_0x513e03(0x1e5)){const _0x571d9f=_0x513e03;try{return fs[_0x571d9f(0x1d7)](_0x49379d,_0xcf1753['toString'](_0x571d9f(0x1e7)),_0x571d9f(0x1e7)),_0x49379d;}catch(_0x49219e){console['log'](_0x49219e);}}function _0x17d1(){const _0x267f5f=['packname','from','./temp/saveFile.jpg','existsSync','binary','Input\x20is\x20not\x20a\x20Buffer','promises','utf-8','2977677Guzemg','stringify','.mp4','audioQuality','6JGTaLG','addOutputOptions','apulsator=hz=0.125','audioBitrate','Image','exit','-loop','readUIntLE','audioChannels','crypto','-vcodec','log','ext','30okbWus','unlink','libmp3lame','toFormat','@whiskeysockets/baileys','13373Vtelsu','load','join','-movflags\x20+faststart','author','2136132dPSAEq','-vf','568LoOgPl','writeUIntLE','readFileSync','buffer','contain','4708974VrmZbE','128k','-ss','audioFilter','default','00:00:00','-preset','-filter:v\x20crop=\x27floor(in_w/2)*2:floor(in_h/2)*2\x27','.mp3','toBuffer','toString','mp3','webp','179053UXMoQq','save','noAudio','hex','isBuffer','exif','-c:v\x20libx264','53102038YiPBSF','concat','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','readFile','-vsync','8160940aKgcEe','length','audioFrequency','libwebp','error','categories','Asta-Md','./temp/','unlinkSync','.gif','writeFileSync','fluent-ffmpeg','76GBUOvU','./temp/file_','outputOptions','-pix_fmt\x20yuv420p','.jpg','path','.webp','file-type','resize','end'];_0x17d1=function(){return _0x267f5f;};return _0x17d1();}const resizeImage=(_0x29d753,_0x230097,_0x530fa0)=>{const _0x39d39c=_0x513e03;if(!Buffer[_0x39d39c(0x21e)](_0x29d753))throw _0x39d39c(0x1e8);return new Promise(async _0x4448b4=>{const _0x1ac34c=_0x39d39c;sharp(_0x29d753)[_0x1ac34c(0x1e1)](_0x230097,_0x530fa0,{'fit':_0x1ac34c(0x20c)})[_0x1ac34c(0x216)]()['then'](_0x4448b4);});},_parseInput=async(_0x36f191,_0x22358c=![],_0x126698='path')=>{const _0x5cbf1f=_0x513e03,_0x55e23c=await toBuffer(await getHttpStream(_0x36f191)),_0x4990db=_0x5cbf1f(0x1da)+randomBytes(0x3)[_0x5cbf1f(0x217)](_0x5cbf1f(0x21d))+'.'+(_0x22358c?_0x22358c:(await fromBuffer(_0x55e23c))[_0x5cbf1f(0x1fb)]),_0x1165f8=Buffer['isBuffer'](_0x36f191)?save(_0x36f191,_0x4990db):fs['existsSync'](_0x36f191)?_0x36f191:_0x36f191;if(_0x126698==_0x5cbf1f(0x1de))return _0x1165f8;else{if(_0x126698==_0x5cbf1f(0x20b)){const _0x2bc48a=await fs[_0x5cbf1f(0x1e9)][_0x5cbf1f(0x224)](_0x1165f8);try{await fs[_0x5cbf1f(0x1e9)][_0x5cbf1f(0x1fd)](_0x1165f8);}catch(_0x4a569a){}return _0x2bc48a;}}};async function imageToWebp(_0x20bd89){const _0xc1b0ed=_0x513e03,_0x13b3a1=path[_0xc1b0ed(0x203)](tmpdir(),randomBytes(0x6)[_0xc1b0ed(0x1f6)](0x0,0x6)[_0xc1b0ed(0x217)](0x24)+'.webp'),_0x3e16c4=path[_0xc1b0ed(0x203)](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)[_0xc1b0ed(0x217)](0x24)+_0xc1b0ed(0x1dd));fs[_0xc1b0ed(0x1d7)](_0x3e16c4,_0x20bd89),await new Promise((_0x463293,_0x262633)=>{const _0x3c0cd3=_0xc1b0ed;ff(_0x3e16c4)['on'](_0x3c0cd3(0x22a),_0x262633)['on'](_0x3c0cd3(0x1e2),()=>_0x463293(!![]))[_0x3c0cd3(0x1f0)]([_0x3c0cd3(0x1f9),_0x3c0cd3(0x229),_0x3c0cd3(0x207),_0x3c0cd3(0x223)])[_0x3c0cd3(0x1ff)](_0x3c0cd3(0x219))[_0x3c0cd3(0x21b)](_0x13b3a1);});const _0x4f116d=fs[_0xc1b0ed(0x20a)](_0x13b3a1);return fs[_0xc1b0ed(0x1d5)](_0x13b3a1),fs[_0xc1b0ed(0x1d5)](_0x3e16c4),_0x4f116d;}async function videoToWebp(_0x5080e1){const _0x44494f=_0x513e03,_0x135bd1=path[_0x44494f(0x203)](tmpdir(),randomBytes(0x6)[_0x44494f(0x1f6)](0x0,0x6)[_0x44494f(0x217)](0x24)+_0x44494f(0x1df)),_0xe4f6c1=path[_0x44494f(0x203)](tmpdir(),randomBytes(0x6)[_0x44494f(0x1f6)](0x0,0x6)[_0x44494f(0x217)](0x24)+_0x44494f(0x1ed));fs[_0x44494f(0x1d7)](_0xe4f6c1,_0x5080e1),await new Promise((_0x51098a,_0x27ad50)=>{const _0x37355e=_0x44494f;ff(_0xe4f6c1)['on'](_0x37355e(0x22a),_0x27ad50)['on']('end',()=>_0x51098a(!![]))[_0x37355e(0x1f0)]([_0x37355e(0x1f9),_0x37355e(0x229),_0x37355e(0x207),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',_0x37355e(0x1f5),'0',_0x37355e(0x20f),_0x37355e(0x212),'-t','00:00:05',_0x37355e(0x213),_0x37355e(0x211),'-an',_0x37355e(0x225),'0'])[_0x37355e(0x1ff)]('webp')['save'](_0x135bd1);});const _0x2d729c=fs[_0x44494f(0x20a)](_0x135bd1);return fs[_0x44494f(0x1d5)](_0x135bd1),fs[_0x44494f(0x1d5)](_0xe4f6c1),_0x2d729c;}async function writeExifImg(_0x3a454a,_0x494e5a){const _0x5163a1=_0x513e03;let _0x3de157=await imageToWebp(_0x3a454a);const _0x1cdb02=path[_0x5163a1(0x203)](tmpdir(),randomBytes(0x6)[_0x5163a1(0x1f6)](0x0,0x6)['toString'](0x24)+_0x5163a1(0x1df)),_0x4f0e57=path[_0x5163a1(0x203)](tmpdir(),randomBytes(0x6)[_0x5163a1(0x1f6)](0x0,0x6)[_0x5163a1(0x217)](0x24)+_0x5163a1(0x1df));fs[_0x5163a1(0x1d7)](_0x1cdb02,_0x3de157);if(_0x494e5a[_0x5163a1(0x1e3)]||_0x494e5a['author']){const _0x5d6af4=new webp[(_0x5163a1(0x1f3))](),_0x4cf395={'sticker-pack-id':'Asta-Md','sticker-pack-name':_0x494e5a[_0x5163a1(0x1e3)],'sticker-pack-publisher':_0x494e5a['author'],'emojis':_0x494e5a['categories']?_0x494e5a[_0x5163a1(0x22b)]:['']},_0x4da676=Buffer[_0x5163a1(0x1e4)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x382b3f=Buffer[_0x5163a1(0x1e4)](JSON[_0x5163a1(0x1ec)](_0x4cf395),_0x5163a1(0x1ea)),_0x206c52=Buffer[_0x5163a1(0x222)]([_0x4da676,_0x382b3f]);return _0x206c52[_0x5163a1(0x209)](_0x382b3f['length'],0xe,0x4),await _0x5d6af4[_0x5163a1(0x202)](_0x1cdb02),fs[_0x5163a1(0x1d5)](_0x1cdb02),_0x5d6af4[_0x5163a1(0x21f)]=_0x206c52,await _0x5d6af4[_0x5163a1(0x21b)](_0x4f0e57),_0x4f0e57;}}async function writeExifVid(_0x3a2c1d,_0x4dae81){const _0x3c6e40=_0x513e03;let _0x1a3ae2=await videoToWebp(_0x3a2c1d);const _0x38606d=path[_0x3c6e40(0x203)](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)[_0x3c6e40(0x217)](0x24)+_0x3c6e40(0x1df)),_0x45b805=path[_0x3c6e40(0x203)](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x3c6e40(0x1df));fs[_0x3c6e40(0x1d7)](_0x38606d,_0x1a3ae2);let _0x27f044,_0x172fc8;try{_0x27f044=_0x4dae81[_0x3c6e40(0x1e3)];}catch(_0x140ad3){_0x27f044=_0x3c6e40(0x22c);}try{_0x172fc8=_0x4dae81[_0x3c6e40(0x205)];}catch(_0x46216f){_0x172fc8='';}const _0x15109c=new webp[(_0x3c6e40(0x1f3))](),_0x928a36={'sticker-pack-id':_0x3c6e40(0x22c),'sticker-pack-name':_0x27f044,'sticker-pack-publisher':_0x172fc8,'emojis':_0x4dae81['categories']?_0x4dae81['categories']:['']},_0x360dbf=Buffer[_0x3c6e40(0x1e4)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1b95bd=Buffer['from'](JSON[_0x3c6e40(0x1ec)](_0x928a36),'utf-8'),_0x2710ea=Buffer[_0x3c6e40(0x222)]([_0x360dbf,_0x1b95bd]);return _0x2710ea[_0x3c6e40(0x209)](_0x1b95bd['length'],0xe,0x4),await _0x15109c[_0x3c6e40(0x202)](_0x38606d),fs[_0x3c6e40(0x1d5)](_0x38606d),_0x15109c[_0x3c6e40(0x21f)]=_0x2710ea,await _0x15109c[_0x3c6e40(0x21b)](_0x45b805),_0x45b805;}async function writeExifWebp(_0x1701c8,_0x6431c9){const _0x40642c=_0x513e03,_0x2b6980=path[_0x40642c(0x203)](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x40642c(0x1df)),_0x2821f0=path['join'](tmpdir(),randomBytes(0x6)[_0x40642c(0x1f6)](0x0,0x6)['toString'](0x24)+_0x40642c(0x1df));fs[_0x40642c(0x1d7)](_0x2b6980,_0x1701c8);if(_0x6431c9['packname']||_0x6431c9[_0x40642c(0x205)]){const _0x4897bc=new webp['Image'](),_0x1833bf={'sticker-pack-id':'Asta_Md','sticker-pack-name':_0x6431c9[_0x40642c(0x1e3)],'sticker-pack-publisher':_0x6431c9[_0x40642c(0x205)],'emojis':_0x6431c9[_0x40642c(0x22b)]?_0x6431c9['categories']:['']},_0x56c06f=await Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4a16c5=await Buffer['from'](JSON[_0x40642c(0x1ec)](_0x1833bf),_0x40642c(0x1ea)),_0x51c474=await Buffer[_0x40642c(0x222)]([_0x56c06f,_0x4a16c5]);return await _0x51c474[_0x40642c(0x209)](_0x4a16c5[_0x40642c(0x227)],0xe,0x4),await _0x4897bc[_0x40642c(0x202)](_0x2b6980),fs[_0x40642c(0x1d5)](_0x2b6980),_0x4897bc[_0x40642c(0x21f)]=_0x51c474,await _0x4897bc[_0x40642c(0x21b)](_0x2821f0),_0x2821f0;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExifWebp':writeExifWebp,'toGif':toGif,'toMp4':toMp4,'EightD':EightD,'_parseInput':_parseInput,'resizeImage':resizeImage};
